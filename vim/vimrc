" Leader mapping summary
"
" Multi-key mappings
"   <leader><leader>*  alternative versions
"   <leader>h*         Haxe
"   <leader>i*         indentation
"   <leader>p*         Ctrl-P
"   <leader>s*         spell
"   <leader>u*         utilities
"
" Single-key mappings (for now)
"   <leader>           recall last command
"   <leader>l          nohlsearch
"   <leader>m          make (alt: no !)
"   <leader>n          NERDTree
"   <leader>c          change to cwd (alt: local)
"   <leader>d          change to previous dir (alt: local)


" Use Vim, not Vi
set nocompatible

" Pathogen
execute pathogen#infect()
"call pathogen#helptags() "

" Basic
set mouse=a
set number
let mapleader = ','
" move up/down using display lines
" only on normal and visual modes
nmap j gj
vmap j gj
nmap k gk
vmap k gk

" Startify
" requires fortunes and cowsay
let g:startify_custom_header =
            \ map(split(system('fortune | cowsay -f tux'), '\n'), '"   ". v:val') + ['']
let g:startify_change_to_dir = 0
let g:startify_files_number = 3
let g:startify_list_order = ['dir']

" Indentation
filetype plugin indent on
set autoindent  " autoindenting always on
" (don't indent switch cases)
set cinoptions+=:0
" (default to spaces, no tabs, and width=4)
set expandtab tabstop=4 shiftwidth=4
nnoremap <leader>id :setlocal expandtab tabstop=4 shiftwidth=4<cr>
" (set linux kernel style)
nnoremap <leader>ik :setlocal noexpandtab tabstop=8 shiftwidth=8 softtabstop=8<cr>

" Completion
" always show the menu, insert longest match
set completeopt=menu,longest
inoremap <C-Space> <C-X><C-O>
"
" Colors
" Default to transparent monokai but set bindings to change
colorscheme monokait
" noremap !!! :colorscheme monokait<cr>
" noremap !!! :colorscheme monokai<cr>
" disable Lenghtmatters by default
let g:lengthmatters_on_by_default=0

" Searching
set incsearch
set ignorecase
set smartcase  " /foo matches FOO and fOo; /FOO only matches FOO
set hlsearch   " highlight searh matches
noremap <leader>l :nohlsearch<cr>

" Other
set autowrite  " autowrite on a bunch of times including :make
set autoread   " autoread when buffer is unchanged

" Commands
noremap <leader><cr> :<c-p>

" Haxe
" (vaxe)
let g:vaxe_prefer_first_in_directory = 0
noremap <leader>hp :call vaxe#ProjectHxml()<cr>
noremap <leader>hd :call vaxe#DefaultHxml()<cr>
noremap <leader>hi <esc>:call vaxe#ImportClass()<cr>
noremap <leader>ht <esc>:call vaxe#Ctags()<cr>
" (tcomment)
if !exists("g:tcommentBlockHx")  " Based on g:tcommentBlockC
    let g:tcommentBlockHx = {
                \ 'commentstring': '/*%s*/',
                \ 'middle': '    ',
                \ 'rxbeg': '\*\+',
                \ 'rxend': '',
                \ 'rxmid': '',
                \ 'replacements': g:tcomment#replacements_c
                \ }
endif
call tcomment#DefineType('haxe', '// %s')
call tcomment#DefineType('haxe_inline', g:tcommentInlineC)
call tcomment#DefineType('haxe_block', g:tcommentBlockHx)

" CtrlP
noremap <leader>pb :CtrlPBookmarkDir<cr>
noremap <leader>pd :CtrlPDir<cr>

" NERDTree
noremap <leader>n :NERDTree<cr>

" Make
noremap <leader>m <esc>:make!<cr>
noremap <leader><leader>m <esc>:make<cr>

" Spell
nnoremap <leader>sl :setlocal nospell<cr>
nnoremap <leader>se :setlocal spell spelllang=en<cr>
nnoremap <leader>sp :setlocal spell spelllang=pt_br<cr>

" Utilities
" current working dir
nnoremap <leader>d :lcd -<cr>
nnoremap <leader><leader>d :cd -<cr>
nnoremap <leader>c :lcd %:p:h<cr>
nnoremap <leader><leader>c :cd %:p:h<cr>
" autocmd BufEnter * lcd %:p:h  " disabled because it was breaking Gdiff

" Better buffer switching
set switchbuf=useopen,usetab

